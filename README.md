
# Проект Mesto. REST API для одностраничного приложения

### Стек

![NODE.JS](https://img.shields.io/badge/Node.js-172F45?style=for-the-badge&logo=node.js)
![MONGODB](https://img.shields.io/badge/MongoDB-172F45?style=for-the-badge&logo=mongodb)
![EXPRESS.JS](https://img.shields.io/badge/Express-172F45?style=for-the-badge&logo=express)

## Директории

* `/models` – папка со схемами и моделями пользователя и карточки
* `/routes` — папка с файлами роутера  
* `/errors` – папка с модулями ошибок
* `/controllers` – папка с контроллерами
* `/middlewares` – папка с мидлварами

## Запуск проекта

Для запуска проекта:
1. Клонировать репозиторий
2. Установить зависимости `npm install`
3. Запустить проект `npm run start`
4. Запустить проект с hot-reload `npm run dev`
5. Проект запускается на http://localhost:3000/

## Запросы

### Регистрация

  POST http://localhost:3000/signup

  В теле запроса передать объект вида

    {
      "email": "example@example.com",
      "password": "password",
      "name": "Жак-Ив Кусто",
      "about": "исследователь",
      "avatar": "https://ichef.bbci.co.uk/news/976/cpsprodpb/15C06/production/_109449098_catsstaring.jpg"
    }
  
  :heavy_check_mark: При успехе в ответе приходит объект пользователя со статусом `201`.
  
  :x: При попытке создать пользователя с уже существующей в базе почтой приходит ответ со статусом `409` и сообщением `Пользователь с таким email уже зарегистрирован`.
  
  :x: При попытке создать пользователя с некорректными данными приходит ответ со статусом `400` и ошибкой валидации.
  
  
### Авторизация

POST http://localhost:3000/signin
  
В теле запроса передать объект вида

    {
      "email": "example@example.com",
      "password": "password"
    }
  
:heavy_check_mark: При успехе приходит ответ со статусом `200` и сообщением `Авторизация прошла успешно`.

:x: При неправильных почте и/или пароле приходит ответ со статусом `401` и сообщением `Неправильные почта или пароль`.

### Редактирование информации по пользователе

PATCH http://localhost:3000/users/me

В теле запроса передать объект вида

    {
      "name": "Жак-Ив Кусто",
      "about": "Исследователь"
    }
  
:heavy_check_mark: При успехе в ответе приходит обновлённый объект пользователя со статусом `200`.
  
:x: При попытке создать пользователя с некорректными данными приходит ответ со статусом `400` и ошибкой валидации.

### Редактирование аватара

PATCH http://localhost:3000/users/me/avatar

В теле запроса передать объект вида

    {
       "avatar": "https://ichef.bbci.co.uk/news/976/cpsprodpb/15C06/production/_109449098_catsstaring.jpg"
    }
  
:heavy_check_mark: При успехе в ответе приходит обновлённый объект пользователя со статусом `200`.
  
:x: При попытке создать пользователя с некорректными данными приходит ответ со статусом `400` и ошибкой валидации.

### Добавление карточки
  
POST http://localhost:3000/cards

В теле запроса передать объект вида

    {
       "name": "Новая карточка",
       "link": "https://images.unsplash.com/photo-1415369629372-26f2fe60c467?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1868&q=80"
    }
  
:heavy_check_mark: При успехе в ответе приходит объект карточки со статусом `201`.
  
:x: При попытке создать карточку с некорректными данными приходит ответ со статусом `400` и ошибкой валидации.
  
### Лайк карточки
  
PUT http://localhost:3000/cards/:id/likes
  
:heavy_check_mark: При успехе в ответе приходит обновлённый объект карточки со статусом `200`.
  
:x: При попытке лайкнуть карточку с несуществующим в базе id приходит ответ со статусом `404` и сообщением `Карточка не найдена`.

:x: При попытке лайкнуть карточку с некорректным id приходит ответ со статусом `400` и ошибкой валидации.
  
### Дизлайк карточки
  
DELETE http://localhost:3000/cards/:id/likes
  
:heavy_check_mark: При успехе в ответе приходит обновлённый объект карточки со статусом `200`.
  
:x: При попытке дизлайкнуть карточку с несуществующим в базе id приходит ответ со статусом `404` и сообщением `Карточка не найдена`.

:x: При попытке дизлайкнуть карточку с некорректным id приходит ответ со статусом `400` и ошибкой валидации.

### Удаление карточки
  
DELETE http://localhost:3000/cards/:id
  
:heavy_check_mark: При успехе в ответе приходит обновлённый объект карточки со статусом `200`.
  
:x: При попытке удалить чужую карточку приходит ответ со статусом `403` и сообщением `Попытка удалить чужую карточку`.

:x: При повторной попытке удалить карточку или попытке удалить карточку с несуществующим в базе id приходит ответ со статусом `404` и сообщением `Карточка не найдена`.

:x: При попытке удалить карточку с некорректным id приходит ответ со статусом `400` и ошибкой валидации.
